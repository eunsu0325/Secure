# ğŸ‹ config/config.yaml (ì •ë¦¬ ë²„ì „)

Dataset:
  train_set_file: /content/drive/MyDrive/Data/GPDSmanosASM_txt/train_palma.txt
  test_set_file: /content/drive/MyDrive/Data/GPDSmanosASM_txt/test_palma.txt
  height: 128
  width: 128
  channels: 1
  augmentation: true
  negative_samples_file: /content/drive/MyDrive/CCNet_OKD_CD/data/train_Tongji.txt
  num_negative_classes: 10

Model:
  architecture: ccnet
  competition_weight: 0.8
  use_pretrained: true
  pretrained_path: /content/drive/MyDrive/net_params1.pth
  # ğŸ§€ í”„ë¡œì ì…˜ í—¤ë“œ ì„¤ì •
  use_projection: true
  projection_dim: 128

Training:
  scr_batch_size: 10
  memory_batch_size: 16
  num_experiences: 100
  memory_size: 1000
  min_samples_per_class: 15
  scr_epochs: 3
  iterations_per_epoch: 15
  num_epochs: 3000  # (ì‚¬ìš© ì•ˆ í•¨)
  num_workers: 8
  learning_rate: 0.0001
  scheduler_step_size: 50
  scheduler_gamma: 0.8
  temperature: 0.07  # SupConLossìš©
  save_interval: 1000  # (ì‚¬ìš© ì•ˆ í•¨)
  test_interval: 5  # â­ í‰ê°€ ë° ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì£¼ê¸°
  checkpoint_path: /content/drive/MyDrive/scr_proxy
  results_path: /content/drive/MyDrive/scr_proxy
  gpu_ids: "0"
  ncm_momentum: 0.9
  
  # ğŸ’ ProxyContrastLoss ì„¤ì • (NEW!)
  use_proxy_loss: true
  proxy_lambda: 0.3  # ì†ì‹¤ ê°€ì¤‘ì¹˜
  proxy_temperature: 0.15  # SupCon(0.07)ë³´ë‹¤ ë†’ê²Œ!
  proxy_topk: 30  # Top-K í´ë˜ìŠ¤
  proxy_full_until: 100  # 100ê°œ ì´í•˜ë©´ ì „ì²´ ì‚¬ìš©
  proxy_warmup_classes: 5  # ìµœì†Œ í´ë˜ìŠ¤ ìˆ˜
  
  # ğŸ’ Lambda ìŠ¤ì¼€ì¤„ë§ (ì ì§„ì  ì¦ê°€)
  proxy_lambda_schedule:
    warmup: 0.1      # warmup ì§í›„
    warmup_10: 0.2   # warmup + 10 exp
    warmup_20: 0.3   # warmup + 20 exp
  
  # ğŸ’ ì»¤ë²„ë¦¬ì§€ ìƒ˜í”Œë§
  use_coverage_sampling: true
  coverage_k_per_class: 2  # í´ë˜ìŠ¤ë‹¹ ìƒ˜í”Œ ìˆ˜
  
  # ğŸ’ í”„ë¡œí† íƒ€ì… ì„¤ì •
  prototype_beta: 0.05  # EMA ê³„ìˆ˜ (ë¯¸ë˜ í™•ì¥ìš©)

# ğŸ‹ ì˜¤í”ˆì…‹ ì¸ì‹ ì„¤ì • (ì •ë¦¬)
Openset:
  enabled: true

  # â˜„ï¸ ì„ê³„ì¹˜ ì„¤ì • (í†µí•©)
  threshold_mode: 'far'      # â˜„ï¸ 'eer' or 'far'
  target_far: 0.01           # â˜„ï¸ FAR íƒ€ê²Ÿ 1%
  threshold_alpha: 0.2       # â˜„ï¸ EMA ìŠ¤ë¬´ë”© ê³„ìˆ˜ (ê¸°ì¡´ smoothing_alpha ëŒ€ì²´)
  threshold_max_delta: 0.03  # â˜„ï¸ ìµœëŒ€ ë³€í™”í­ (ê¸°ì¡´ max_delta ëŒ€ì²´)
  
  # ì´ˆê¸°ê°’ ë° ì›Œë°ì—…
  warmup_users: 10           # ì›Œë°ì—… ê¸°ê°„
  initial_tau: 0.9           # ì´ˆê¸° ì„ê³„ì¹˜
  
  # ë§ˆì§„ ê·œì¹™
  use_margin: false
  margin_tau: 0.07
  
  # ë°ì´í„° ë¶„í• 
  dev_ratio: 0.3             # Dev ì„¸íŠ¸ ë¹„ìœ¨
  negref_max_eval: 5000      # NegRef ìµœëŒ€ ìƒ˜í”Œ
  
  # ë¡œê¹…
  verbose_calibration: true  # â˜„ï¸ ìƒì„¸ ì¶œë ¥

# ğŸ”¥ ë„¤ê±°í‹°ë¸Œ ìƒ˜í”Œ ì„¤ì •
Negative:
  warmup_experiences: 4
  max_per_batch: 1
  r0: 0.5